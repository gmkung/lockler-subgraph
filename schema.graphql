type Lockler @entity(immutable: true) {
  id: ID! # Safe address
  safe: Safe!
  realityModules: [RealityModule!]! @derivedFrom(field: "lockler")
  owners: [Bytes!]! # Safe owners
  threshold: BigInt! # Safe threshold
  createdAt: BigInt!
  createdAtBlock: BigInt!
  creator: Bytes! # Address that created the Lockler
  transactionCount: BigInt! # Number of transactions executed
}

type Safe @entity(immutable: true) {
  id: ID! # Safe address
  owners: [Bytes!]!
  threshold: BigInt!
  modules: [Bytes!]!
  nonce: BigInt! # Current nonce
  domainSeparator: Bytes! # EIP-712 domain separator
  signedMessages: [Bytes!]! # Array of signed message hashes
  transactions: [SafeTransaction!]! @derivedFrom(field: "safe")
  createdAt: BigInt!
  createdAtBlock: BigInt!
}

type SafeTransaction @entity(immutable: true) {
  id: ID! # Transaction hash
  safe: Safe!
  to: Bytes!
  value: BigInt!
  data: Bytes!
  operation: Int!
  safeTxGas: BigInt!
  baseGas: BigInt!
  gasPrice: BigInt!
  gasToken: Bytes!
  refundReceiver: Bytes!
  signatures: Bytes!
  nonce: BigInt!
  executedAt: BigInt
  executedAtBlock: BigInt
  success: Boolean
}

type RealityModule @entity(immutable: true) {
  id: ID! # Module address
  lockler: Lockler! # Reference back to the Lockler
  owner: Bytes! # Safe address
  avatar: Bytes! # Safe address
  target: Bytes!
  oracle: Bytes!
  questionTimeout: BigInt!
  questionCooldown: BigInt!
  answerExpiration: BigInt!
  minimumBond: BigInt!
  template: BigInt!
  questionArbitrator: Bytes!
  questionText: String
  createdAt: BigInt!
  createdAtBlock: BigInt!
} 